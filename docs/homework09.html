<!DOCTYPE html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Homework 09: timeit, curlit</title>

	<!-- Bootstrap core CSS -->
	<link href="static/css/blugold.css" rel="stylesheet">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<style>
	body {
	    padding: 10px;
	}
	</style>
    </head>
    <body>
	<div class="container">

	    <div class="row">
		<div class="page-header">
		    <ul class="nav nav-pills pull-right">
			
			<li><a href="index.html"><i class="fa fa-linux"></i> <span class="visible-md-inline visible-lg-inline">Home</span></a></li>
			
		    </ul>
		    <h1><i class="fa fa-code"></i> Homework 09: timeit, curlit</h1>
		</div>
	    </div>

            
<p>The goal of this homework assignment is to allow you to practice using
<a href="https://en.wikipedia.org/wiki/System_call">system calls</a> involving <a href="https://en.wikipedia.org/wiki/Process_(computing)">processes</a>, <a href="https://en.wikipedia.org/wiki/Signal_(IPC)">signals</a>, and <a href="https://en.wikipedia.org/wiki/Network_socket">sockets</a> in <a href="https://en.wikipedia.org/wiki/C_(programming_language)">C</a> by
implementing two utilities:</p>
<ol>
<li>
<p><code>timeit</code>: The first utility allows users to compute the elapsed time of an
  application while also enforcing a timeout (or cut off time), similar to
  <a href="https://man7.org/linux/man-pages/man1/timeout.1.html">timeout</a>.</p>
</li>
<li>
<p><code>curlit</code>: The second utility implements a simple <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> client similar to
  <a href="https://curl.se/">curl</a>.</p>
</li>
</ol>
<div class="alert alert-danger">
<h4 id="set-us-up-the-bomb-no"><i class="fa fa-bomb"></i> Set us up the bomb (No!)<a class="headerlink" href="#set-us-up-the-bomb-no" title="Permanent link">&para;</a></h4>
<p>Be careful with the <a href="https://man7.org/linux/man-pages/man2/fork.2.html">fork</a> system call:</p>
<ul>
<li>Avoid calling <a href="https://man7.org/linux/man-pages/man2/fork.2.html">fork</a> in a loop.</li>
<li>Make sure the <strong>child</strong> <a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a> calls <a href="https://man7.org/linux/man-pages/man3/exit.3.html">exit</a> right after an <a href="https://man7.org/linux/man-pages/man3/exec.3.html">exec</a>.</li>
</ul>
<p>If you still manage to create a <a href="https://en.wikipedia.org/wiki/Fork_bomb">fork bomb</a>, <strong>do not</strong> simply go to another
machine and run the same program.  Notify the
<a href="mailto:csehelp@nd.edu">csehelp@nd.edu</a> and explain what happened.</p>
</div>
<p>For this assignment, record your source code and any responses to the
following activities in the <code>homework09</code> folder of your <strong>assignments</strong>
<a href="https://github.com">GitHub</a> repository and push your work by <strong>noon Saturday, April 26</strong>.</p>
<div class="alert alert-info">
<h4 id="frequently-asked-questions"><i class="fa fa-question"></i> Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h4>
<div class="text-center">
<iframe allowfullscreen="true" frameborder="0" height="389" mozallowfullscreen="true" src="https://docs.google.com/presentation/d/e/2PACX-1vQm9ODzC4HZfSwBFqAF2XsgUyeRat1tcwSH-cgOPw5J3H9jD8o1BYX1dn0pm1wqr6rvlbC0HsL7-wf7/pubembed?start=false&amp;loop=false&amp;delayms=3000" webkitallowfullscreen="true" width="480"></iframe>
</div>
</div>
<h2 id="activity-0-preparation">Activity 0: Preparation<a class="headerlink" href="#activity-0-preparation" title="Permanent link">&para;</a></h2>
<p>Before starting this homework assignment, you should first perform a <code>git
pull</code> to retrieve any changes in your remote <a href="https://github.com">GitHub</a> repository:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span><span style="color: #008000">cd</span><span style="color: #bbbbbb"> </span>path/to/repository<span style="color: #bbbbbb">                   </span><span style="color: #3D7B7B; font-style: italic"># Go to assignments repository</span>

$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>switch<span style="color: #bbbbbb"> </span>master<span style="color: #bbbbbb">                       </span><span style="color: #3D7B7B; font-style: italic"># Make sure we are in master branch</span>

$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>pull<span style="color: #bbbbbb"> </span>--rebase<span style="color: #bbbbbb">                       </span><span style="color: #3D7B7B; font-style: italic"># Get any remote changes not present locally</span>
</code></pre></div>

<p>Next, create a new branch for this assignment:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>checkout<span style="color: #bbbbbb"> </span>-b<span style="color: #bbbbbb"> </span>homework09<span style="color: #bbbbbb">              </span><span style="color: #3D7B7B; font-style: italic"># Create homework09 branch and check it out</span>
</code></pre></div>

<h3 id="task-1-skeleton-code">Task 1: Skeleton Code<a class="headerlink" href="#task-1-skeleton-code" title="Permanent link">&para;</a></h3>
<p>To help you get started, the instructor has provided you with the following
<strong>skeleton code</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Go to homework09 folder</span>
$<span style="color: #bbbbbb"> </span><span style="color: #008000">cd</span><span style="color: #bbbbbb"> </span>homework09

<span style="color: #3D7B7B; font-style: italic"># Download Makefile</span>
$<span style="color: #bbbbbb"> </span>curl<span style="color: #bbbbbb"> </span>-LO<span style="color: #bbbbbb"> </span>https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/Makefile

<span style="color: #3D7B7B; font-style: italic"># Download C skeleton code</span>
$<span style="color: #bbbbbb"> </span>curl<span style="color: #bbbbbb"> </span>-LO<span style="color: #bbbbbb"> </span>https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/curlit.c
$<span style="color: #bbbbbb"> </span>curl<span style="color: #bbbbbb"> </span>-LO<span style="color: #bbbbbb"> </span>https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/socket.c
$<span style="color: #bbbbbb"> </span>curl<span style="color: #bbbbbb"> </span>-LO<span style="color: #bbbbbb"> </span>https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/socket.h
$<span style="color: #bbbbbb"> </span>curl<span style="color: #bbbbbb"> </span>-LO<span style="color: #bbbbbb"> </span>https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/socket.unit.c
$<span style="color: #bbbbbb"> </span>curl<span style="color: #bbbbbb"> </span>-LO<span style="color: #bbbbbb"> </span>https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/timeit.c
</code></pre></div>

<p>Once downloaded, you should see the following files in your <code>homework09</code>
directory:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>homework09
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>Makefile<span style="color: #bbbbbb">           </span><span style="color: #3D7B7B; font-style: italic"># This is the Makefile for building all the project artifacts</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>curlit.c<span style="color: #bbbbbb">           </span><span style="color: #3D7B7B; font-style: italic"># This is the curlit utility C source file</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>socket.c<span style="color: #bbbbbb">           </span><span style="color: #3D7B7B; font-style: italic"># This is the timeit library C source file</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>socket.h<span style="color: #bbbbbb">           </span><span style="color: #3D7B7B; font-style: italic"># This is the socket library C header file</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>socket.unit.c<span style="color: #bbbbbb">      </span><span style="color: #3D7B7B; font-style: italic"># This is the socket library C unit test source file</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>timeit.c<span style="color: #bbbbbb">           </span><span style="color: #3D7B7B; font-style: italic"># This is the timeit utility C source file</span>
</code></pre></div>

<h3 id="task-2-initial-import">Task 2: Initial Import<a class="headerlink" href="#task-2-initial-import" title="Permanent link">&para;</a></h3>
<p>Now that the files are downloaded into the <code>homework09</code> folder, you can
<strong>commit</strong> them to your <a href="https://git-scm.com/">git</a> repository:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>Makefile<span style="color: #bbbbbb">                            </span><span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>*.c
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>commit<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Homework 09: Initial Import&quot;</span><span style="color: #bbbbbb"> </span><span style="color: #3D7B7B; font-style: italic"># Record changes</span>
</code></pre></div>

<h3 id="task-3-unit-and-functional-tests">Task 3: Unit and Functional Tests<a class="headerlink" href="#task-3-unit-and-functional-tests" title="Permanent link">&para;</a></h3>
<p>After downloading these files, you can run <code>make test</code> to run the tests.</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run all tests (will trigger automatic download)</span>
$<span style="color: #bbbbbb"> </span>make<span style="color: #bbbbbb"> </span><span style="color: #008000">test</span>
</code></pre></div>

<p>You will notice that the Makefile downloads these additional test data and scripts:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>homework09
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>curlit.test.sh<span style="color: #bbbbbb">   </span><span style="color: #3D7B7B; font-style: italic"># This is the curlit utility test shell script</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>socket.unit.sh<span style="color: #bbbbbb">   </span><span style="color: #3D7B7B; font-style: italic"># This is the socket library unit test shell script</span>
<span style="color: #bbbbbb">    </span><span style="color: #AA5D1F; font-weight: bold">\_</span><span style="color: #bbbbbb"> </span>timeit.test.sh<span style="color: #bbbbbb">   </span><span style="color: #3D7B7B; font-style: italic"># This is the timeit utility test shell script</span>
</code></pre></div>

<p>You will be using these <a href="https://en.wikipedia.org/wiki/Unit_testing">unit tests</a> and <a href="https://en.wikipedia.org/wiki/Functional_testing">functional tests</a> to verify the
correctness and behavior of your code.</p>
<div class="alert alert-info">
<h4 id="automatic-downloads"><i class="fa fa-download"></i> Automatic Downloads<a class="headerlink" href="#automatic-downloads" title="Permanent link">&para;</a></h4>
<p>The <code>test</code> scripts are automatically downloaded by the <code>Makefile</code>, so any
modifications you do to them will be lost when you run <code>make</code> again. Likewise,
because they are automatically downloaded, you do not need to <code>add</code> or <code>commit</code>
them to your <a href="https://git-scm.com/">git</a> repository.</p>
</div>
<h3 id="task-4-makefile">Task 4: Makefile<a class="headerlink" href="#task-4-makefile" title="Permanent link">&para;</a></h3>
<p>The <code>Makefile</code> contains all the <strong>rules</strong> or <strong>recipes</strong> for building the
project artifacts (e.g. <code>timeit</code>, <code>curlit</code>):</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #19177C">CC</span><span style="color: #666666">=</span><span style="color: #bbbbbb">       </span>gcc
<span style="color: #19177C">CFLAGS</span><span style="color: #666666">=</span><span style="color: #bbbbbb">   </span>-Wall<span style="color: #bbbbbb"> </span>-g<span style="color: #bbbbbb"> </span>-std<span style="color: #666666">=</span>gnu99
<span style="color: #19177C">LD</span><span style="color: #666666">=</span><span style="color: #bbbbbb">       </span>gcc
<span style="color: #19177C">LDFLAGS</span><span style="color: #666666">=</span><span style="color: #bbbbbb">  </span>-L.
<span style="color: #19177C">TARGETS</span><span style="color: #666666">=</span><span style="color: #bbbbbb">  </span>timeit<span style="color: #bbbbbb"> </span>curlit

<span style="color: #0000FF">all</span><span style="color: #666666">:</span><span style="color: #bbbbbb">      </span><span style="color: #008000; font-weight: bold">$(</span><span style="color: #19177C">TARGETS</span><span style="color: #008000; font-weight: bold">)</span>

<span style="color: #3D7B7B; font-style: italic">#------------------------------------------------------------------------------</span>
<span style="color: #3D7B7B; font-style: italic"># TODO: Rules for object files and executables</span>
<span style="color: #3D7B7B; font-style: italic">#------------------------------------------------------------------------------</span>

<span style="color: #0000FF">timeit.o</span><span style="color: #666666">:</span>

<span style="color: #0000FF">socket.o</span><span style="color: #666666">:</span>

<span style="color: #0000FF">curlit.o</span><span style="color: #666666">:</span>

<span style="color: #0000FF">timeit</span><span style="color: #666666">:</span>

<span style="color: #0000FF">curlit</span><span style="color: #666666">:</span>

<span style="color: #3D7B7B; font-style: italic">#------------------------------------------------------------------------------</span>
<span style="color: #3D7B7B; font-style: italic"># DO NOT MODIFY BELOW</span>
<span style="color: #3D7B7B; font-style: italic">#------------------------------------------------------------------------------</span>

<span style="border: 1px solid #FF0000">...</span>
</code></pre></div>

<p>For this task, you will need to add <a href="https://www.gnu.org/software/make/manual/html_node/Rule-Example.html#Rule-Example">rules</a> for building the <em>intermediate</em>
<a href="https://en.wikipedia.org/wiki/Object_file">object</a> files, and the <code>timeit</code> and <code>curlit</code> executables with the appropriate
dependencies as shown in the <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph">DAG</a> below:</p>
<div class="alert alert-info">
<h4 id="makefile-variables"><i class="fa fa-cogs"></i> Makefile Variables<a class="headerlink" href="#makefile-variables" title="Permanent link">&para;</a></h4>
<p>You <strong>must</strong> use the <code>CC</code>, <code>CFLAGS</code> variables when appropriate in your
<a href="https://www.gnu.org/software/make/manual/html_node/Rule-Example.html#Rule-Example">rules</a>.  You <strong>should</strong> also consider using <a href="https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html">automatic variables</a> such as
<code>$@</code> and <code>$&lt;</code> as well.</p>
</div>
<p>Once you have a working <code>Makefile</code>, you should be able to run the following commands:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Build all TARGETS</span>
$<span style="color: #bbbbbb"> </span>make
gcc<span style="color: #bbbbbb"> </span>-Wall<span style="color: #bbbbbb"> </span>-g<span style="color: #bbbbbb"> </span>-std<span style="color: #666666">=</span>gnu99<span style="color: #bbbbbb"> </span>-c<span style="color: #bbbbbb"> </span>-o<span style="color: #bbbbbb"> </span>timeit.o<span style="color: #bbbbbb"> </span>timeit.c
gcc<span style="color: #bbbbbb"> </span>-L.<span style="color: #bbbbbb"> </span>-o<span style="color: #bbbbbb"> </span>timeit<span style="color: #bbbbbb"> </span>timeit.o
gcc<span style="color: #bbbbbb"> </span>-Wall<span style="color: #bbbbbb"> </span>-g<span style="color: #bbbbbb"> </span>-std<span style="color: #666666">=</span>gnu99<span style="color: #bbbbbb"> </span>-c<span style="color: #bbbbbb"> </span>-o<span style="color: #bbbbbb"> </span>curlit.o<span style="color: #bbbbbb"> </span>curlit.c
gcc<span style="color: #bbbbbb"> </span>-Wall<span style="color: #bbbbbb"> </span>-g<span style="color: #bbbbbb"> </span>-std<span style="color: #666666">=</span>gnu99<span style="color: #bbbbbb"> </span>-c<span style="color: #bbbbbb"> </span>-o<span style="color: #bbbbbb"> </span>socket.o<span style="color: #bbbbbb"> </span>socket.c
gcc<span style="color: #bbbbbb"> </span>-L.<span style="color: #bbbbbb"> </span>-o<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>curlit.o<span style="color: #bbbbbb"> </span>socket.o

<span style="color: #3D7B7B; font-style: italic"># Run all tests</span>
$<span style="color: #bbbbbb"> </span>make<span style="color: #bbbbbb"> </span><span style="color: #008000">test</span>
Testing<span style="color: #bbbbbb"> </span>timeit...
...

Testing<span style="color: #bbbbbb"> </span>socket...
...

Testing<span style="color: #bbbbbb"> </span>curlit...
...

<span style="color: #3D7B7B; font-style: italic"># Remove generated artifacts</span>
$<span style="color: #bbbbbb"> </span>make<span style="color: #bbbbbb"> </span>clean
</code></pre></div>

<div class="alert alert-danger">
<p><strong>Note</strong>: The tests will <strong>fail</strong> if you haven't implemented all the
  necessary functions appropriately.</p>
</div>
<div class="alert alert-warning">
<h4 id="warnings"><i class="fa fa-warning"></i> Warnings<a class="headerlink" href="#warnings" title="Permanent link">&para;</a></h4>
<p>You must include the <code>-Wall</code> flag in your <code>CFLAGS</code> when you compile.  This
also means that your code must <strong>compile without any warnings</strong>, otherwise
points will be deducted.</p>
</div>
<h2 id="activity-2-timeit-25-points">Activity 2: <code>timeit</code> (<em>2.5 Points</em>)<a class="headerlink" href="#activity-2-timeit-25-points" title="Permanent link">&para;</a></h2>
<p>For the first activity, write a program, <code>timeit</code>, that executes the given
command until a timeout is reached or the program terminates as show below:</p>
<div class="thumbnail text-center">
  <script src="https://asciinema.org/a/VEyE5vVCwFtCSAFm9rK5Bd5NG.js" id="asciicast-VEyE5vVCwFtCSAFm9rK5Bd5NG" async="true"></script>
</div>

<p>If the <code>verbose</code> mode is enabled, your <code>timeit</code> should display the following
sort of <strong>debugging</strong> messages:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ ./timeit -v
timeit.c:68:parse_options: Timeout = 10
timeit.c:69:parse_options: Verbose = 1
Usage: timeit [options] command...
Options:
    -t SECONDS  Timeout duration before killing command (default is 10)
    -v          Display verbose debugging output

$ ./timeit -t 5 -v sleep 1
timeit.c:68:parse_options: Timeout = 5
timeit.c:69:parse_options: Verbose = 1
timeit.c:85:parse_options: Command = sleep 1
timeit.c:116:main: Registering handlers...
timeit.c:119:main: Grabbing start time...
timeit.c:137:main: Sleeping for 5 seconds...
timeit.c:139:main: Waiting for child 160815...
timeit.c:131:main: Executing child...
timeit.c:145:main: Child exit status: 0
timeit.c:148:main: Grabbing end time...
Time Elapsed: 1.0

$ ./timeit -t 1 -v sleep 2
timeit.c:68:parse_options: Timeout = 1
timeit.c:69:parse_options: Verbose = 1
timeit.c:85:parse_options: Command = sleep 2
timeit.c:116:main: Registering handlers...
timeit.c:119:main: Grabbing start time...
timeit.c:137:main: Sleeping for 1 seconds...
timeit.c:139:main: Waiting for child 160841...
timeit.c:131:main: Executing child...
timeit.c:101:handle_signal: Killing child 160841...
timeit.c:145:main: Child exit status: 9
timeit.c:148:main: Grabbing end time...
Time Elapsed: 1.0
</code></pre></div>

<div class="alert alert-warning">
<p><strong>Note</strong>: If the time limit is exceeded, the parent should <a href="https://man7.org/linux/man-pages/man2/kill.2.html">kill</a> the child
and <a href="https://man7.org/linux/man-pages/man2/wait.2.html">wait</a> for it.  Moreover, the parent should always return the child's
exit status as its own exit status.</p>
</div>
<h3 id="task-1-timeitc">Task 1: <code>timeit.c</code><a class="headerlink" href="#task-1-timeitc" title="Permanent link">&para;</a></h3>
<p>To implement the <code>timeit</code> utility, you are to complete the provided
<code>timeit.c</code> source file which contains the following <a href="https://en.wikipedia.org/wiki/C_preprocessor#Macro_definition_and_expansion">macros</a> and
<strong>functions</strong>:</p>
<h4 id="macros">Macros<a class="headerlink" href="#macros" title="Permanent link">&para;</a></h4>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #9C6500">#define debug(M, ...) \</span>
<span style="color: #9C6500">    if (Verbose) { \</span>
<span style="color: #9C6500">        fprintf(stderr, &quot;%s:%d:%s: &quot; M, __FILE__, __LINE__, __func__, ##__VA_ARGS__); \</span>
<span style="color: #9C6500">}</span>
</code></pre></div>

<blockquote>
<p>This <code>debug</code> <a href="https://en.wikipedia.org/wiki/C_preprocessor#Macro_definition_and_expansion">macro</a> displays the specified formatted message only if the
<code>Verbose</code> global variable is <code>true</code>.  The message includes the name of the
file, the line number, and the function at which the <a href="https://en.wikipedia.org/wiki/C_preprocessor#Macro_definition_and_expansion">macro</a> is called.</p>
</blockquote>
<h4 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h4>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Display usage message and exit.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   status      Exit status.</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">void</span><span style="color: #bbbbbb">    </span><span style="color: #0000FF">usage</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>status);
</code></pre></div>

<blockquote>
<p>This provided <code>usage</code> function displays the help message and terminates the
<a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a> with the specified <code>status</code> code.</p>
</blockquote>
<hr>

<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Parse command line options.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   argc        Number of command line arguments.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   argv        Array of command line argument strings.</span>
<span style="color: #3D7B7B; font-style: italic"> * @return  Array of strings representing command to execute.</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span><span style="color: #666666">**</span><span style="color: #bbbbbb"> </span><span style="color: #0000FF">parse_options</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>argc,<span style="color: #bbbbbb"> </span><span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span><span style="color: #666666">**</span>argv);
</code></pre></div>

<blockquote>
<p>This <code>parse_options</code> function processes the command line arguments by
setting the <code>Timeout</code> and <code>Verbose</code> global variables and by constructing an
<a href="https://en.wikipedia.org/wiki/C_(programming_language)#Arrays">array</a> of <a href="https://en.wikipedia.org/wiki/String_(computer_science)">strings</a> to represent the specified <code>command</code>.</p>
</blockquote>
<div class="alert alert-success">
<p><strong>Hint</strong>: Use <a href="https://man7.org/linux/man-pages/man3/realloc.3.html">calloc</a> to create an <a href="https://en.wikipedia.org/wiki/C_(programming_language)#Arrays">array</a> of <a href="https://en.wikipedia.org/wiki/String_(computer_science)">strings</a> that is <code>NULL</code>
  terminated.</p>
</div>
<hr>

<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Handle signal.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   signum      Signal number.</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">void</span><span style="color: #bbbbbb">    </span><span style="color: #0000FF">handle_signal</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>signum);
</code></pre></div>

<blockquote>
<p>This provided <code>handle_signal</code> function kills the child <a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a> whenever a
<code>SIGALRM</code> is invoked.</p>
</blockquote>
<h4 id="main-execution">Main Execution<a class="headerlink" href="#main-execution" title="Permanent link">&para;</a></h4>
<p>The main logic for <code>timeit</code> will be in the <code>main</code> function.  While there are
multiple approaches on how to accomplish the task of running a program with a
time limit, the recommended method is shown below:</p>
<div class="thumbnail text-center">
  <img src="static/img/homework09-timeit.png" class="img-responsive">
</div>

<p>In this approach, the <code>main</code> function first registers the <code>signal_handle</code>
function for <code>SIGALRM</code> using <a href="https://man7.org/linux/man-pages/man2/signal.2.html">signal</a>.  Then the parent <a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a> performs a
<a href="https://man7.org/linux/man-pages/man2/fork.2.html">fork</a> and the child <a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a> executes the specified <code>command</code> using one of
the <a href="https://man7.org/linux/man-pages/man3/exec.3.html">exec</a> variants.</p>
<p>After the <a href="https://man7.org/linux/man-pages/man2/fork.2.html">fork</a>, the parent <a href="https://en.wikipedia.org/wiki/Process_(computing)">process</a> sets an <a href="https://man7.org/linux/man-pages/man2/alarm.2.html">alarm</a> based on the specified
<code>Timeout</code>.  It then simply calls <a href="https://man7.org/linux/man-pages/man2/wait.2.html">wait</a>.  If the <a href="https://man7.org/linux/man-pages/man2/alarm.2.html">alarm</a> triggers, then the
handler should <a href="https://man7.org/linux/man-pages/man2/kill.2.html">kill</a> the child process.  Otherwise, if the child terminates
before the <code>Timeout</code> then the parent cancels the <a href="https://man7.org/linux/man-pages/man2/alarm.2.html">alarm</a> and completes its
<a href="https://man7.org/linux/man-pages/man2/wait.2.html">wait</a> to retrieve the child's exit status.</p>
<p>To measure the elapsed time, you must use the <a href="https://man7.org/linux/man-pages/man2/clock_getres.2.html">clock_gettime</a> function with
the <code>CLOCK_MONOTONIC</code> clock identifier.</p>
<h3 id="task-2-testing">Task 2: Testing<a class="headerlink" href="#task-2-testing" title="Permanent link">&para;</a></h3>
<p>Once you have implemented <code>timeit</code>, you can test it by running the
<code>test-timeit</code> target:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$ make test-timeit
Testing timeit...
 system calls                                                 ... Success
 usage (-h)                                                   ... Success
 usage (no arguments)                                         ... Success
 usage (-v, no command)                                       ... Success
 usage (-t 5 -v, no command)                                  ... Success
 sleep                                                        ... Success
 sleep 1                                                      ... Success
 -v sleep 1                                                   ... Success
 -t 5 -v sleep 1                                              ... Success
 sleep 5                                                      ... Success
 -v sleep 5                                                   ... Success
 -t 1 sleep 5                                                 ... Success
 -t 1 -v sleep 5                                              ... Success
 -v find /etc -type f                                         ... Success
 -t 5 -v /tmp/timeit.1000/TROLL                               ... Success

   Score 2.50 / 2.50
  Status Success
</code></pre></div>

<h2 id="activity-3-socket-1-point">Activity 3: <code>socket</code> (<em>1 Point</em>)<a class="headerlink" href="#activity-3-socket-1-point" title="Permanent link">&para;</a></h2>
<p>The <code>curlit</code> utility will require using <a href="https://en.wikipedia.org/wiki/Network_socket">sockets</a> in <a href="https://en.wikipedia.org/wiki/C_(programming_language)">C</a> to communicate with
a remote <strong>host</strong>.  To simplify the process of establishing a connection, you
are to make consolidate all the code for connecting to a remote <strong>host</strong> into
a single <code>socket_dial</code> function.</p>
<h3 id="task-1-socketc">Task 1: <code>socket.c</code><a class="headerlink" href="#task-1-socketc" title="Permanent link">&para;</a></h3>
<p>To implement the <code>socket</code> library, you are to complete the provided
<code>socket.c</code> source file which contains the following <strong>function</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Create socket connection to specified host and port.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   host        Host string to connect to.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   port        Port string to connect to.</span>
<span style="color: #3D7B7B; font-style: italic"> * @return  Socket file stream of connection if successful, otherwise NULL.</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">FILE</span><span style="color: #bbbbbb"> </span><span style="color: #666666">*</span>socket_dial(<span style="color: #008000; font-weight: bold">const</span><span style="color: #bbbbbb"> </span><span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span><span style="color: #666666">*</span>host,<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">const</span><span style="color: #bbbbbb"> </span><span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span><span style="color: #666666">*</span>port)
</code></pre></div>

<blockquote>
<p>This function uses <a href="http://man7.org/linux/man-pages/man2/socket.2.html">socket</a> to connect to the given <code>host</code> and <code>port</code> using
<a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">TCP</a> and returns a <strong>read/writable</strong> <code>FILE</code> stream corresponding to the
<a href="http://man7.org/linux/man-pages/man2/socket.2.html">socket</a> connection.</p>
</blockquote>
<div class="alert alert-success">
<p><strong>Hints</strong>:</p>
<ul>
<li>
<p>You must check if any of the <a href="https://en.wikipedia.org/wiki/System_call">system calls</a> fail.</p>
</li>
<li>
<p>You should use <a href="http://man7.org/linux/man-pages/man3/getaddrinfo.3.html">getaddrinfo</a>, <a href="http://man7.org/linux/man-pages/man2/socket.2.html">socket</a>, <a href="http://man7.org/linux/man-pages/man2/connect.2.html">connect</a>, <a href="http://man7.org/linux/man-pages/man3/getaddrinfo.3.html">freeaddrinfo</a>, and <a href="https://man7.org/linux/man-pages/man3/fdopen.3p.html">fdopen</a>.</p>
</li>
</ul>
</div>
<h3 id="task-2-testing_1">Task 2: Testing<a class="headerlink" href="#task-2-testing_1" title="Permanent link">&para;</a></h3>
<p>As you implement the functions in <code>socket.c</code>, you should use the
<code>socket.unit</code> executable with the <code>socket.unit.sh</code> script to test each of
your functions:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Build test artifacts and run test scripts</span>
$<span style="color: #bbbbbb"> </span>make<span style="color: #bbbbbb"> </span>test-socket
Testing<span style="color: #bbbbbb"> </span>socket<span style="color: #bbbbbb"> </span>...
<span style="color: #bbbbbb"> </span>socket_dial_success<span style="color: #bbbbbb">                                          </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>socket_dial_failure<span style="color: #bbbbbb">                                          </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>socket_dial_mode<span style="color: #bbbbbb">                                             </span>...<span style="color: #bbbbbb"> </span>Success

<span style="color: #bbbbbb">   </span>Score<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>.00<span style="color: #bbbbbb"> </span>/<span style="color: #bbbbbb"> </span><span style="color: #666666">1</span>.00
<span style="color: #bbbbbb">  </span>Status<span style="color: #bbbbbb"> </span>Success
</code></pre></div>

<p>You can also run the testing script manually:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Run shell unit test script manually</span>
$<span style="color: #bbbbbb"> </span>./socket.unit.sh
...
</code></pre></div>

<p>To debug your <a href="http://man7.org/linux/man-pages/man2/socket.2.html">socket</a> functions, you can use <a href="https://www.sourceware.org/gdb/">gdb</a> on the socket.unit
executable:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Start gdb on socket.unit</span>
$<span style="color: #bbbbbb"> </span>gdb<span style="color: #bbbbbb"> </span>./socket.unit
<span style="color: #666666">(</span>gdb<span style="color: #666666">)</span><span style="color: #bbbbbb"> </span>run<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span><span style="color: #bbbbbb">     </span><span style="color: #3D7B7B; font-style: italic"># Run socket.unit with the &quot;0&quot; command line argument (ie. socket_dial_success)</span>
...
</code></pre></div>

<p>You can also use valgrind to check for memory errors:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Check for memory errors on first test case</span>
<span style="color: #3D7B7B; font-style: italic"># $ valgrind --leak-check=full ./socket.unit 0</span>
</code></pre></div>

<h2 id="activity-4-curlit-45-points">Activity 4: <code>curlit</code> (<em>4.5 Points</em>)<a class="headerlink" href="#activity-4-curlit-45-points" title="Permanent link">&para;</a></h2>
<p>Once you have the <code>socket_dial</code> function implemented, you can complete the
<code>curlit</code> utility, which performs a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> request at the specified <a href="https://en.wikipedia.org/wiki/URL">URL</a>.</p>
<div class="thumbnail">
  <img src="static/img/homework09-curlit.png" class="img-responsive">
</div>

<p>Here are some examples of <code>curlit</code> in action:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic"># Display usage message</span>
$<span style="color: #bbbbbb"> </span>./curlit<span style="color: #bbbbbb"> </span>-h
Usage:<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span><span style="color: #666666">[</span>-h<span style="color: #bbbbbb"> </span><span style="color: #666666">]</span><span style="color: #bbbbbb"> </span>URL

<span style="color: #3D7B7B; font-style: italic"># Make HTTP request to http://example.com</span>
$<span style="color: #bbbbbb"> </span>./curlit<span style="color: #bbbbbb"> </span>http://example.com
&lt;!doctype<span style="color: #bbbbbb"> </span>html&gt;
&lt;html&gt;
&lt;head&gt;
<span style="color: #bbbbbb">    </span>&lt;title&gt;Example<span style="color: #bbbbbb"> </span>Domain&lt;/title&gt;

<span style="color: #bbbbbb">    </span>&lt;meta<span style="color: #bbbbbb"> </span><span style="color: #19177C">charset</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;utf-8&quot;</span><span style="color: #bbbbbb"> </span>/&gt;
<span style="color: #bbbbbb">    </span>&lt;meta<span style="color: #bbbbbb"> </span>http-equiv<span style="color: #666666">=</span><span style="color: #BA2121">&quot;Content-type&quot;</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">content</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/html; charset=utf-8&quot;</span><span style="color: #bbbbbb"> </span>/&gt;
<span style="color: #bbbbbb">    </span>&lt;meta<span style="color: #bbbbbb"> </span><span style="color: #19177C">name</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;viewport&quot;</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">content</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;width=device-width, initial-scale=1&quot;</span><span style="color: #bbbbbb"> </span>/&gt;
<span style="color: #bbbbbb">    </span>...
&lt;/head&gt;

&lt;body&gt;
&lt;div&gt;
<span style="color: #bbbbbb">    </span>&lt;h1&gt;Example<span style="color: #bbbbbb"> </span>Domain&lt;/h1&gt;
<span style="color: #bbbbbb">    </span>&lt;p&gt;This<span style="color: #bbbbbb"> </span>domain<span style="color: #bbbbbb"> </span>is<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">for</span><span style="color: #bbbbbb"> </span>use<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">in</span><span style="color: #bbbbbb"> </span>illustrative<span style="color: #bbbbbb"> </span>examples<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">in</span><span style="color: #bbbbbb"> </span>documents.<span style="color: #bbbbbb"> </span>You<span style="color: #bbbbbb"> </span>may<span style="color: #bbbbbb"> </span>use<span style="color: #bbbbbb"> </span>this
<span style="color: #bbbbbb">    </span>domain<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">in</span><span style="color: #bbbbbb"> </span>literature<span style="color: #bbbbbb"> </span>without<span style="color: #bbbbbb"> </span>prior<span style="color: #bbbbbb"> </span>coordination<span style="color: #bbbbbb"> </span>or<span style="color: #bbbbbb"> </span>asking<span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">for</span><span style="color: #bbbbbb"> </span>permission.&lt;/p&gt;
<span style="color: #bbbbbb">    </span>&lt;p&gt;&lt;a<span style="color: #bbbbbb"> </span><span style="color: #19177C">href</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;https://www.iana.org/domains/example&quot;</span>&gt;More<span style="color: #bbbbbb"> </span>information...&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
Elapsed<span style="color: #bbbbbb"> </span>Time:<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.03<span style="color: #bbbbbb"> </span>s
Bandwidth:<span style="color: #bbbbbb">    </span><span style="color: #666666">0</span>.05<span style="color: #bbbbbb"> </span>MB/s

<span style="color: #3D7B7B; font-style: italic"># Return success if status was 200 OK</span>
$<span style="color: #bbbbbb"> </span><span style="color: #008000">echo</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">$?</span>
<span style="color: #666666">0</span>

<span style="color: #3D7B7B; font-style: italic"># Make HTTP request to google.com</span>
$<span style="color: #bbbbbb"> </span>./curlit<span style="color: #bbbbbb"> </span>google.com
&lt;HTML&gt;&lt;HEAD&gt;&lt;meta<span style="color: #bbbbbb"> </span>http-equiv<span style="color: #666666">=</span><span style="color: #BA2121">&quot;content-type&quot;</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">content</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;text/html;charset=utf-8&quot;</span>&gt;
&lt;TITLE&gt;301<span style="color: #bbbbbb"> </span>Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;
&lt;H1&gt;301<span style="color: #bbbbbb"> </span>Moved&lt;/H1&gt;
The<span style="color: #bbbbbb"> </span>document<span style="color: #bbbbbb"> </span>has<span style="color: #bbbbbb"> </span>moved
&lt;A<span style="color: #bbbbbb"> </span><span style="color: #19177C">HREF</span><span style="color: #666666">=</span><span style="color: #BA2121">&quot;http://www.google.com/&quot;</span>&gt;here&lt;/A&gt;.
&lt;/BODY&gt;&lt;/HTML&gt;
Elapsed<span style="color: #bbbbbb"> </span>Time:<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.07<span style="color: #bbbbbb"> </span>s
Bandwidth:<span style="color: #bbbbbb">    </span><span style="color: #666666">0</span>.00<span style="color: #bbbbbb"> </span>MB/s

<span style="color: #3D7B7B; font-style: italic"># Return failure if status was not 200 OK</span>
$<span style="color: #bbbbbb"> </span><span style="color: #008000">echo</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">$?</span>
<span style="color: #666666">1</span>
</code></pre></div>

<div class="alert alert-warning">
<h4 id="missing-url-components"><i class="fa fa-link"></i> Missing URL Components<a class="headerlink" href="#missing-url-components" title="Permanent link">&para;</a></h4>
<p><strong>Note</strong>: Not all <a href="https://en.wikipedia.org/wiki/URL">URL</a>s will specify every component explicitly.  Some may
  be missing the <strong>protocol</strong> or the <strong>port</strong> or even the <strong>path</strong> (the
  <strong>host</strong> must always be given).</p>
<p>For instance, here are some valid <a href="https://en.wikipedia.org/wiki/URL">URL</a>s you will need to support:</p>
<ul>
<li><code>example.com</code></li>
<li><code>http://example.com</code></li>
<li><code>http://example.com:8888</code></li>
<li><code>http://example.com/data</code></li>
<li><code>example.com:9999/data</code></li>
</ul>
<p>If the <strong>port</strong> is not specified, then you are to assume the default <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>
port: <code>80</code>.  If a <strong>path</strong> is not specified, then you can assume an empty
path: <code>""</code>.</p>
</div>
<h3 id="task-1-curlitc">Task 1: <code>curlit.c</code><a class="headerlink" href="#task-1-curlitc" title="Permanent link">&para;</a></h3>
<p>To implement the <code>curlit</code> utility, you are to complete the provided
<code>curlit.c</code> source file which contains the following <strong>functions</strong>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Display usage message and exit.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   status      Exit status</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">void</span><span style="color: #bbbbbb">    </span><span style="color: #0000FF">usage</span>(<span style="color: #B00040">int</span><span style="color: #bbbbbb"> </span>status);
</code></pre></div>

<blockquote>
<p>This provided <code>usage</code> function displays the help message and terminates the
process with the specified <code>status</code> code.</p>
</blockquote>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Parse URL string into URL structure.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   s       URL string</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   url     Pointer to URL structure</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">void</span><span style="color: #bbbbbb">    </span><span style="color: #0000FF">parse_url</span>(<span style="color: #008000; font-weight: bold">const</span><span style="color: #bbbbbb"> </span><span style="color: #B00040">char</span><span style="color: #bbbbbb"> </span><span style="color: #666666">*</span>s,<span style="color: #bbbbbb"> </span>URL<span style="color: #bbbbbb"> </span><span style="color: #666666">*</span>url);
</code></pre></div>

<blockquote>
<p>This function parses the <code>s</code> <a href="https://en.wikipedia.org/wiki/URL">URL</a> string to extract the <code>host</code>, <code>port</code>,
and <code>path</code> components and copies them into the corresponding attributes of
the <code>URL</code> structure.</p>
</blockquote>
<div class="alert alert-success">
<p><strong>Hints</strong>:</p>
<ul>
<li>
<p>Copy the <a href="https://en.wikipedia.org/wiki/URL">URL</a> <code>s</code> string to a local <strong>buffer</strong> that you can manipulate.</p>
</li>
<li>
<p>Use <a href="https://man7.org/linux/man-pages/man3/strstr.3.html">strstr</a> and <a href="https://man7.org/linux/man-pages/man3/strchr.3.html">strchr</a> to search the local <strong>buffer</strong> for the appropriate
  delimiters (e.g. <code>HOST_DELIMITER</code>, <code>PATH_DELIMITER</code>, and <code>PORT_DELIMITER</code>) and
  split the string into different components.</p>
</li>
<li>
<p>Use <a href="https://man7.org/linux/man-pages/man3/strcpy.3.html">strcpy</a> to copy the found components to the <code>URL</code> structure.</p>
</li>
</ul>
</div>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">/**</span>
<span style="color: #3D7B7B; font-style: italic"> * Fetch contents of URL and print to standard out.</span>
<span style="color: #3D7B7B; font-style: italic"> *</span>
<span style="color: #3D7B7B; font-style: italic"> * Print elapsed time and bandwidth to standard error.</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   s       URL string</span>
<span style="color: #3D7B7B; font-style: italic"> * @param   url     Pointer to URL structure</span>
<span style="color: #3D7B7B; font-style: italic"> * @return  true if client is able to read all of the content (or if the</span>
<span style="color: #3D7B7B; font-style: italic"> * content length is unset), otherwise false</span>
<span style="color: #3D7B7B; font-style: italic"> **/</span>
<span style="color: #B00040">bool</span><span style="color: #bbbbbb">    </span><span style="color: #0000FF">fetch_url</span>(URL<span style="color: #bbbbbb"> </span><span style="color: #666666">*</span>url);
</code></pre></div>

<blockquote>
<p>This function performs a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> request with the given <code>URL</code> by using
<code>socket_dial</code> to form a <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">TCP</a> connection.  It writes the response <strong>body</strong> or
<strong>contents</strong> to <strong>standard out</strong>, and the <strong>elapsed time</strong> and <strong>bandwidth</strong>
metrics to <strong>standard error</strong>.  It returns <code>false</code> if any error was
experienced during the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> transaction or if the server response was not
<code>200 OK</code>.</p>
</blockquote>
<div class="alert alert-success">
<p><strong>Hints</strong>:</p>
<ul>
<li>
<p>You must check if any of the <a href="https://en.wikipedia.org/wiki/System_call">system calls</a> fail.</p>
</li>
<li>
<p>You will want to follow the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> transaction steps described above
  and outlined below:</p>
<ol>
<li>Connect to remote host and port.</li>
<li>Send <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> request to remote server.</li>
<li>Read response status and verify success.</li>
<li>Read response headers (until there is an empty line).</li>
<li>Read response body and copy to <code>stream</code>.</li>
<li>Close connection.</li>
<li><p>Return number of bytes written to <code>stream</code>.</p></li>
</ol>
</li>
<li>
<p>Remember that <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> uses <a href="https://en.wikipedia.org/wiki/Newline#Representation">DOS line endings</a> and terminates each line
  with <code>\r\n</code>.</p>
</li>
<li>
<p>Use <a href="https://man7.org/linux/man-pages/man3/strstr.3.html">strstr</a> to check the response status.</p>
</li>
<li>
<p>Use <a href="https://man7.org/linux/man-pages/man3/scanf.3.html">sscanf</a> to parse the response headers for the value of
  <code>Content-Length</code>.</p>
</li>
<li>
<p>Use <a href="https://man7.org/linux/man-pages/man3/fgetc.3.html">fgets</a> to read the response status and headers.</p>
</li>
<li>
<p>Use <a href="https://man7.org/linux/man-pages/man3/fread.3.html">fread</a> and <a href="https://man7.org/linux/man-pages/man3/fread.3.html">fwrite</a> to read the response body since it may contain
  binary data.</p>
</li>
<li>
<p>If the server does not return a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> status of <code>200 OK</code>  or it provides a
  <code>Content-Length</code> and the number of bytes written to <code>steam</code> does not match,
  then the function should return <code>false</code> to indicate an error.  Otherwise,
  if the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> status is <code>200 OK</code> and there is no <code>Content-Length</code> or the
  number of bytes written matches, then it should return <code>true</code>.</p>
</li>
<li>
<p>Only a <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> status of <code>200 OK</code> is considered <strong>successful</strong>.</p>
</li>
</ul>
</div>
<h3 id="task-2-testing_2">Task 2: Testing<a class="headerlink" href="#task-2-testing_2" title="Permanent link">&para;</a></h3>
<p>Once you have implemented <code>curlit</code>, you can test it by running the
<code>test-curlit</code> target:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>make<span style="color: #bbbbbb"> </span>test-curlit
Testing<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>utility...
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb">                                                       </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>-h<span style="color: #bbbbbb">                                                    </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>-?<span style="color: #bbbbbb">                                                    </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>http://fake.host<span style="color: #bbbbbb">                                      </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>http://example.com<span style="color: #bbbbbb">                                    </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>http://nd.edu<span style="color: #bbbbbb">                                         </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>h4x0r.space<span style="color: #bbbbbb">                                           </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>h4x0r.space:9898/mind.txt<span style="color: #bbbbbb">                             </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>h4x0r.space:9898/txt/walden.txt<span style="color: #bbbbbb">                       </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>h4x0r.space:9898/txt/gatsby.txt<span style="color: #bbbbbb">                       </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>http://h4x0r.space:9898/txt/warandpeace.txt<span style="color: #bbbbbb">           </span>...<span style="color: #bbbbbb"> </span>Success
<span style="color: #bbbbbb"> </span>curlit<span style="color: #bbbbbb"> </span>http://h4x0r.space:9898/img/appa.png<span style="color: #bbbbbb">                  </span>...<span style="color: #bbbbbb"> </span>Success

<span style="color: #bbbbbb">   </span>Score<span style="color: #bbbbbb"> </span><span style="color: #666666">4</span>.50<span style="color: #bbbbbb"> </span>/<span style="color: #bbbbbb"> </span><span style="color: #666666">4</span>.50
<span style="color: #bbbbbb">  </span>Status<span style="color: #bbbbbb"> </span>Success
</code></pre></div>

<h2 id="activity-5-quiz-2-points">Activity 5: Quiz (<em>2 Points</em>)<a class="headerlink" href="#activity-5-quiz-2-points" title="Permanent link">&para;</a></h2>
<p>Once you have completed all the activities above, you are to complete the
following <strong>reflection quiz</strong>:</p>
<div id="quiz-questions"></div>

<div id="quiz-responses"></div>

<script src="static/js/dredd-quiz.js"></script>
<script>
loadQuiz('static/json/homework09.json');
</script>

<pre style="display: none;" id="dr-container" class="codehilite"><code id="dredd-response"></code></pre>

<p>As with <a href="reading05.html">Reading 01</a>, you will need to store your answers in a
<code>homework09/answers.json</code> file.  You can use the form above to generate the
contents of this file, or you can write the <a href="https://json.org">JSON</a> by hand.</p>
<p>To test your quiz, you can use the <code>check.py</code> script:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>$<span style="color: #bbbbbb"> </span>../.scripts/check.py
Checking<span style="color: #bbbbbb"> </span>homework09<span style="color: #bbbbbb"> </span>quiz<span style="color: #bbbbbb"> </span>...
<span style="color: #bbbbbb">     </span>Q01<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.10
<span style="color: #bbbbbb">     </span>Q02<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.10
<span style="color: #bbbbbb">     </span>Q03<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.10
<span style="color: #bbbbbb">     </span>Q04<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.10
<span style="color: #bbbbbb">     </span>Q05<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.80
<span style="color: #bbbbbb">     </span>Q06<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.40
<span style="color: #bbbbbb">     </span>Q07<span style="color: #bbbbbb"> </span><span style="color: #666666">0</span>.40
<span style="color: #bbbbbb">   </span>Score<span style="color: #bbbbbb"> </span><span style="color: #666666">2</span>.00<span style="color: #bbbbbb"> </span>/<span style="color: #bbbbbb"> </span><span style="color: #666666">2</span>.00
<span style="color: #bbbbbb">  </span>Status<span style="color: #bbbbbb"> </span>Success
</code></pre></div>

<h2 id="code-review-optional-1-point">Code Review (<em>Optional, 1 Point</em>)<a class="headerlink" href="#code-review-optional-1-point" title="Permanent link">&para;</a></h2>
<p>For <strong>one point</strong> of extra credit, you may perform a <a href="https://en.wikipedia.org/wiki/Code_review">code review</a> with
either an <strong>AI</strong> agent (of your choice) or with a <strong>TA</strong> by <strong>Wednesday,
April 30</strong>:</p>
<ol>
<li>
<p><strong>AI Code Review</strong>: Once the <strong>whole assignment is completed</strong>, pick one
  or two of the most challenging functions and ask the <strong>AI</strong> agent to review
  your original code by suggesting improvements, optimizations, or
  alternative implementations.</p>
<p>Test and verify these suggestions and then decide whether or not you wish
to keep them.  Discuss in the <code>README.md</code> what you think of the <strong>AI</strong>
code review and explain your decision.</p>
<div class="alert alert-info" markdown="1">
<h4 id="ai-code-review-verification"><i class="fa fa-check"></i> AI Code Review: Verification<a class="headerlink" href="#ai-code-review-verification" title="Permanent link">&para;</a></h4>
<p>To receive credit for the <strong>AI Code Review</strong>, you must:</p>
<ol>
<li>
<p>Link a <strong>transcript</strong> or include sufficient <strong>screenshots</strong> of the
  <a href="https://en.wikipedia.org/wiki/Code_review">code review</a> in the <strong>Pull Request</strong> of your conversation with the <strong>AI</strong>
  agent.</p>
</li>
<li>
<p>This conversation must show your <strong>original code</strong> and the <strong>suggested
  improvements</strong> by the <strong>AI</strong> agent.</p>
</li>
<li>
<p>Discuss the <a href="https://en.wikipedia.org/wiki/Code_review">code review</a> and explain your decision in the
  <code>README.md</code>.</p>
</li>
<li>
<p>Update your <strong>Pull Request</strong> based on the feedback.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>TA Code Review</strong>: Once the <strong>whole assignment is completed</strong>, meet with
  one of the <strong>teaching assistants</strong> from the course <strong>in-person</strong> and have
  them review your whole assignment.</p>
<p>To document this process, make the <strong>teaching assistant</strong> who is
reviewing your code a <strong>reviewer</strong> on your <strong>Pull Request</strong> and have them
record their suggestions as they discuss them with you <strong>in-person</strong>.</p>
<p>After the <a href="https://en.wikipedia.org/wiki/Code_review">code review</a>, you can decide whether or not you wish to
incorporate this feedback into your implementation and update your <strong>Pull
Request</strong>.</p>
<div class="alert alert-success" markdown="1">
<p><strong>Note</strong>: The <strong>TA</strong> performing the <a href="https://en.wikipedia.org/wiki/Code_review">code review</a> does not need to be the
  same <strong>TA</strong> responsible for grading your assignment.</p>
</div>
<div class="alert alert-info" markdown="1">
<h4 id="ta-code-review-verification"><i class="fa fa-check"></i> TA Code Review: Verification<a class="headerlink" href="#ta-code-review-verification" title="Permanent link">&para;</a></h4>
<p>To receive credit for the <strong>TA Code Review</strong>, you must:</p>
<ol>
<li>
<p>Meet with a <strong>teaching assistant</strong> <strong>in-person</strong>.</p>
</li>
<li>
<p>Make this <strong>teaching assistant</strong> a <strong>reviewer</strong> in your <strong>Pull
  Request</strong>.</p>
</li>
<li>
<p>Have the <strong>teaching assistant</strong> record their suggestions on the
  <strong>Pull Request</strong>.</p>
</li>
<li>
<p>Update your <strong>Pull Request</strong> based on the feedback.</p>
</li>
</ol>
</div>
</li>
</ol>
<h2 id="guru-point-irc-bot-personal-website-optional-2-points">Guru Point: IRC Bot, Personal Website (<em>Optional, 2 Points</em>)<a class="headerlink" href="#guru-point-irc-bot-personal-website-optional-2-points" title="Permanent link">&para;</a></h2>
<p>For this week, there are two Guru Point opportunities.</p>
<h3 id="irc-bot">IRC Bot<a class="headerlink" href="#irc-bot" title="Permanent link">&para;</a></h3>
<p>For extra credit, you are to use <a href="https://www.python.org/">Python</a> and <a href="https://en.wikipedia.org/wiki/Network_socket">sockets</a> to implement your own
version of <a href="https://github.com/pbui/bobbit/">bobbit</a>, an <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a> chat bot.  Your bot should connect to the
<a href="https://chat.ndlug.org">chat.ndlug.org</a> server and join the <code>#bots</code> channel.  It should be able to
respond to at least one type of command or message.  The particular operation
is up to you.</p>
<p>To help you get started, here are some resources:</p>
<ul>
<li><a href="https://ircdocs.horse/specs/">Internet Relay Chat - Specifications</a></li>
<li><a href="https://modern.ircdocs.horse/">Modern IRC Client Protocol</a></li>
</ul>
<div class="alert alert-warning">
<h4 id="ndlug-irc"><i class="fa fa-linux"></i> NDLUG IRC<a class="headerlink" href="#ndlug-irc" title="Permanent link">&para;</a></h4>
<p>To connect to the <a href="https://ndlug.org/">NDLUG</a> server yourself, you can use the following
<strong>anonymous web client</strong>:</p>
<blockquote>
<p><a href="https://gamja.ndlug.org/?channels=#bots">https://gamja.ndlug.org/?channels=#bots</a></p>
</blockquote>
<p>Alternatively, if you wish to have access to more chat features such as
history, you can register via <a href="https://regserv.ndlug.org/">regserv.ndlug.org</a>, which will setup a
<a href="https://thelounge.chat/">Lounge</a> and <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a> account for you.</p>
<p>The <a href="https://thelounge.chat/">Lounge</a> is a web-based <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a> client that you can use from any web
browser, but you are free to connect to the <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a> server from any <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a>
client such as <a href="https://weechat.org/">Weechat</a>, <a href="https://hexchat.github.io/">Hexchat</a>, or <a href="https://www.codeux.com/textual/">Textual</a> using <code>chat.ndlug.org</code> as
the hostname and <code>6697</code> as the port.</p>
</div>
<p>A basic <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a> client session looks like this:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>USER ircle-pbui 0 * :pbui&#39;s bot
NICK ircle-pbui
JOIN #bots
PRIVMSG #bots :I&#39;ve fallen and I can&#39;t get up!
</code></pre></div>

<ol>
<li>
<p>The <code>USER</code> command sets the users real name and registers the user.</p>
</li>
<li>
<p>The <code>NICK</code> command sets the users nickname.</p>
</li>
<li>
<p>The <code>JOIN</code> command allows the user to join in a channel (in this case <code>#bots</code>).</p>
</li>
<li>
<p>The <code>PRIVMSG</code> command allows the user to send a message (in this case to
the channel <code>#bots</code>).</p>
</li>
</ol>
<p>Here is a basic skeleton, <a href="https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/ircle.py">ircle.py</a>, that you can start with:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">os</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">socket</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">ssl</span>

<span style="color: #3D7B7B; font-style: italic"># Constants</span>

HOST <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;chat.ndlug.org&#39;</span>
PORT <span style="color: #666666">=</span> <span style="color: #666666">6697</span>
NICK <span style="color: #666666">=</span> <span style="color: #BA2121">f&#39;ircle-</span><span style="color: #A45A77; font-weight: bold">{</span>os<span style="color: #666666">.</span>environ[<span style="color: #BA2121">&quot;USER&quot;</span>]<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&#39;</span>

<span style="color: #3D7B7B; font-style: italic"># Functions</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ircle</span>():
    <span style="color: #3D7B7B; font-style: italic"># Connect to IRC server</span>
    ssl_context <span style="color: #666666">=</span> ssl<span style="color: #666666">.</span>create_default_context()
    tcp_socket  <span style="color: #666666">=</span> socket<span style="color: #666666">.</span>create_connection((HOST, PORT))
    ssl_socket  <span style="color: #666666">=</span> ssl_context<span style="color: #666666">.</span>wrap_socket(tcp_socket, server_hostname<span style="color: #666666">=</span>HOST)
    ssl_stream  <span style="color: #666666">=</span> ssl_socket<span style="color: #666666">.</span>makefile(<span style="color: #BA2121">&#39;rw&#39;</span>)

    <span style="color: #3D7B7B; font-style: italic"># Identify ourselves</span>
    ssl_stream<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&#39;USER </span><span style="color: #A45A77; font-weight: bold">{</span>NICK<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> 0 * :</span><span style="color: #A45A77; font-weight: bold">{</span>NICK<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&#39;</span>)
    ssl_stream<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&#39;NICK </span><span style="color: #A45A77; font-weight: bold">{</span>NICK<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&#39;</span>)
    ssl_stream<span style="color: #666666">.</span>flush()

    <span style="color: #3D7B7B; font-style: italic"># Join #bots channel</span>
    ssl_stream<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&#39;JOIN #bots</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&#39;</span>)
    ssl_stream<span style="color: #666666">.</span>flush()

    <span style="color: #3D7B7B; font-style: italic"># Write message to channel</span>
    ssl_stream<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&quot;PRIVMSG #bots :I&#39;ve fallen and I can&#39;t get up!</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span>)
    ssl_stream<span style="color: #666666">.</span>flush()

    <span style="color: #3D7B7B; font-style: italic"># Read and display</span>
    <span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000; font-weight: bold">True</span>:
        message <span style="color: #666666">=</span> ssl_stream<span style="color: #666666">.</span>readline()<span style="color: #666666">.</span>strip()
        <span style="color: #008000">print</span>(message)

<span style="color: #3D7B7B; font-style: italic"># Main Execution</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    ircle()

<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">__name__</span> <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;__main__&#39;</span>:
    main()
</code></pre></div>

<p>Alternatively, if you are interested in using the new <a href="https://docs.python.org/3/library/asyncio.html">asyncio</a> features of
<a href="https://www.python.org/">Python</a> 3 to perform event-driven and concurrent programming, you can
use the following skeleton <a href="https://www3.nd.edu/~pbui/teaching/cse.20289.sp25/static/txt/homework09/ircle-async.py">ircle-async.py</a>:</p>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">asyncio</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">os</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">sys</span>

<span style="color: #3D7B7B; font-style: italic"># Constants</span>

HOST <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;chat.ndlug.org&#39;</span>
PORT <span style="color: #666666">=</span> <span style="color: #666666">6697</span>
NICK <span style="color: #666666">=</span> <span style="color: #BA2121">f&#39;ircle-</span><span style="color: #A45A77; font-weight: bold">{</span>os<span style="color: #666666">.</span>environ[<span style="color: #BA2121">&quot;USER&quot;</span>]<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121">&#39;</span>

<span style="color: #3D7B7B; font-style: italic"># Functions</span>

<span style="color: #008000; font-weight: bold">async</span> <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">ircle</span>():
    <span style="color: #3D7B7B; font-style: italic"># Connect to IRC server</span>
    reader, writer <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">await</span> asyncio<span style="color: #666666">.</span>open_connection(HOST, PORT, ssl<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">True</span>)

    <span style="color: #3D7B7B; font-style: italic"># Identify ourselves</span>
    writer<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&#39;USER </span><span style="color: #A45A77; font-weight: bold">{</span>NICK<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #BA2121"> 0 * :</span><span style="color: #A45A77; font-weight: bold">{</span>NICK<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&#39;</span><span style="color: #666666">.</span>encode())
    writer<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&#39;NICK </span><span style="color: #A45A77; font-weight: bold">{</span>NICK<span style="color: #A45A77; font-weight: bold">}</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&#39;</span><span style="color: #666666">.</span>encode())
    <span style="color: #008000; font-weight: bold">await</span> writer<span style="color: #666666">.</span>drain()

    <span style="color: #3D7B7B; font-style: italic"># Join #bots channel</span>
    writer<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&#39;JOIN #bots</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&#39;</span><span style="color: #666666">.</span>encode())
    <span style="color: #008000; font-weight: bold">await</span> writer<span style="color: #666666">.</span>drain()

    <span style="color: #3D7B7B; font-style: italic"># Write message to channel</span>
    writer<span style="color: #666666">.</span>write(<span style="color: #BA2121">f&quot;PRIVMSG #bots :I&#39;ve fallen and I can&#39;t get up!</span><span style="color: #AA5D1F; font-weight: bold">\r\n</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">.</span>encode())
    <span style="color: #008000; font-weight: bold">await</span> writer<span style="color: #666666">.</span>drain()

    <span style="color: #3D7B7B; font-style: italic"># Read and display</span>
    <span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000; font-weight: bold">True</span>:
        message <span style="color: #666666">=</span> (<span style="color: #008000; font-weight: bold">await</span> reader<span style="color: #666666">.</span>readline())<span style="color: #666666">.</span>decode()<span style="color: #666666">.</span>strip()
        <span style="color: #008000">print</span>(message)

<span style="color: #3D7B7B; font-style: italic"># Main execution</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">main</span>():
    asyncio<span style="color: #666666">.</span>run(ircle())

<span style="color: #008000; font-weight: bold">if</span> <span style="color: #19177C">__name__</span> <span style="color: #666666">==</span> <span style="color: #BA2121">&#39;__main__&#39;</span>:
    main()
</code></pre></div>

<div class="alert alert-info">
<h4 id="irc-bot-verification"><i class="fa fa-check"></i> IRC Bot: Verification<a class="headerlink" href="#irc-bot-verification" title="Permanent link">&para;</a></h4>
<p>To receive credit for the <strong>IRC Bot</strong>, you must:</p>
<ol>
<li>
<p>You must have your <a href="https://en.wikipedia.org/wiki/Internet_Relay_Chat">IRC</a> bot join the <code>#bots</code> channel on <a href="https://chat.ndlug.org">chat.ndlug.org</a> server.</p>
</li>
<li>
<p>Demonstrate your bot's functionality by logging into the server with your
own account and showing the instructor (<code>pnutzh4x0r</code>).</p>
</li>
<li>
<p>You have until <strong>Wednesday, April 30</strong>.</p>
</li>
</ol>
</div>
<h3 id="personal-website">Personal Website<a class="headerlink" href="#personal-website" title="Permanent link">&para;</a></h3>
<p>For extra credit, you are to make your own <strong>personal website</strong> such as:</p>
<ul>
<li><a href="https://dblitt.com/">Daniel Blittschau</a></li>
<li><a href="https://mayleenliu.com/">Mayleen Liu</a></li>
<li><a href="https://cbasurtom.github.io/">Carlos Basurto</a></li>
<li><a href="https://stevenconaway.me/">Steven Conaway</a></li>
</ul>
<p>The idea behind this website is to publish a portfolio or profile that you
can share with others (<em>including potential employers</em>).  As such, you should
<strong>avoid</strong> platforms such as <strong>SquareSpace</strong>, <strong>WiX</strong>, or <strong>Wordpress</strong>, and
instead opt to <strong>building the website yourself</strong>.</p>
<p>To do so, you can use a platform such as <a href="https://pages.github.com/">GitHub Pages</a> or use resources from
the <a href="https://education.github.com/pack">GitHub Student Developer Pack</a> (which includes cloud and domain name
credits).</p>
<div class="alert alert-info">
<h4 id="personal-website-verification"><i class="fa fa-check"></i> Personal Website: Verification<a class="headerlink" href="#personal-website-verification" title="Permanent link">&para;</a></h4>
<p>To receive credit for the <strong>Personal Website</strong>, you must:</p>
<ol>
<li>
<p>Post a link to your <strong>personal website</strong> in the class <strong>Slack</strong> channel.</p>
</li>
<li>
<p>Update your <code>README.md</code> to include a link to your <strong>personal website</strong>.</p>
</li>
<li>
<p>You have until <strong>Wednesday, April 30</strong>.</p>
</li>
</ol>
</div>
<h2 id="submission">Submission<a class="headerlink" href="#submission" title="Permanent link">&para;</a></h2>
<p>To submit your assignment, please commit your work to the <code>homework09</code> folder
of your <code>homework09</code> branch in your <strong>assignments</strong> <a href="https://github.com">GitHub</a> repository.
Your <code>homework09</code> folder should <strong>only</strong> contain the following files:</p>
<ul>
<li><code>Makefile</code></li>
<li><code>answers.json</code></li>
<li><code>curlit.c</code></li>
<li><code>socket.c</code></li>
<li><code>socket.h</code></li>
<li><code>socket.unit.c</code></li>
<li><code>timeit.c</code></li>
</ul>
<div class="alert alert-warning">
<p><strong>Note</strong>: You do not need to commit the test scripts because the <code>Makefile</code>
automatically downloads them.</p>
</div>
<div class="codehilite" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #3D7B7B; font-style: italic">#-----------------------------------------------------------------------</span>
<span style="color: #3D7B7B; font-style: italic"># Make sure you have already completed Activity 0: Preparation</span>
<span style="color: #3D7B7B; font-style: italic">#-----------------------------------------------------------------------</span>
...
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>Makefile<span style="color: #bbbbbb">                        </span><span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>commit<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Homework 09: Makefile&quot;</span><span style="color: #bbbbbb">   </span><span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>timeit.c<span style="color: #bbbbbb">                        </span><span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>commit<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Homework 09: timeit&quot;</span><span style="color: #bbbbbb">     </span><span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>socket.c<span style="color: #bbbbbb">                        </span><span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>commit<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Homework 09: socket&quot;</span><span style="color: #bbbbbb">     </span><span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>socket.c<span style="color: #bbbbbb">                        </span><span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>commit<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Homework 09: curlit&quot;</span><span style="color: #bbbbbb">     </span><span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>add<span style="color: #bbbbbb"> </span>answers.json<span style="color: #bbbbbb">                    </span><span style="color: #3D7B7B; font-style: italic"># Mark changes for commit</span>
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>commit<span style="color: #bbbbbb"> </span>-m<span style="color: #bbbbbb"> </span><span style="color: #BA2121">&quot;Homework 09: quiz&quot;</span><span style="color: #bbbbbb">       </span><span style="color: #3D7B7B; font-style: italic"># Record changes</span>
...
$<span style="color: #bbbbbb"> </span>git<span style="color: #bbbbbb"> </span>push<span style="color: #bbbbbb"> </span>-u<span style="color: #bbbbbb"> </span>origin<span style="color: #bbbbbb"> </span>homework09<span style="color: #bbbbbb">           </span><span style="color: #3D7B7B; font-style: italic"># Push branch to GitHub</span>
</code></pre></div>

<div class="alert alert-warning">
<h4 id="acknowledgments"><i class="fa fa-life-ring"></i> Acknowledgments<a class="headerlink" href="#acknowledgments" title="Permanent link">&para;</a></h4>
<p>If you collaborated with any other students, or received help from TAs or AI
tools on this assignment, please record this support in the <code>README.md</code> in
the <code>homework09</code> folder and include it with your <strong>Pull Request</strong>.</p>
</div>
<div class="alert alert-danger">
<h4 id="pull-request"><i class="fa fa-github"></i> Pull Request<a class="headerlink" href="#pull-request" title="Permanent link">&para;</a></h4>
<p>Remember to create a <strong>Pull Request</strong> and assign the appropriate TA from the
<a href="reading13_tas.html">Reading 13 TA List</a>.</p>
<p><strong>DO NOT MERGE</strong> your own <strong>Pull Request</strong>.  The TAs use open <strong>Pull Requests</strong>
to keep track of which assignments to grade.  Closing them yourself will
cause a delay in grading and confuse the TAs.</p>
</div>


	    <div class="row">
		<hr/>

		<footer class="text-center">
		    <p class="text-muted">
		    <small>
		    Built using
		    <a href="https://getbootstrap.com/">Bootstrap</a>,
		    <a href="https://fontawesome.com/">Font Awesome</a>, and
		    <a href="http://www.python.org/">Python</a>.
		    <br/>
		    &copy; 2025 <a href="http://www.nd.edu">University of Notre Dame</a>
		    </small>
		    </p>
		</footer>
	    </div>

	</div> <!-- /container -->

	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	
	
    </body>
</html>

